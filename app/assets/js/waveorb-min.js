!function(){var e=async function(e,n){var t,o,r,c,i,a=1,s=1e3,u=1001,f="$cbid";function l(a,s){o={},r=0,(t=new WebSocket(e)).onmessage=function(e){var t=JSON.parse(e.data),r=t[f];r?(delete t[f],o[r]&&(o[r](t,e),delete o[r])):n.onmessage&&n.onmessage(t,e)},t.onopen=function(e){a&&a(v),n.ping&&(clearInterval(c),clearTimeout(i),c=setInterval(function(){d({$ping:1})},n.ping),i=setTimeout(function(){clearInterval(c),p(u)},n.disconnect)),n.onopen&&n.onopen(v,e)},t.onerror=function(e){s&&s(e),n.onerror&&n.onerror(e)},t.onclose=function(e){n.reconnect&&setTimeout(l,n.reconnect),n.onclose&&n.onclose(e)}}function p(e){e=e||s,t.close(e)}function d(e){t.readyState===a&&t.send(JSON.stringify(e))}n||(n={}),void 0!==n.reconnect&&!0!==n.reconnect||(n.reconnect=1e3),!0===n.ping&&(n.ping=1e3),void 0===n.disconnect&&(n.disconnect=3e3);var v={connect:l,send:d,fetch:function(e){return new Promise(function(n){e[f]=++r,o[r]=function(e){n(e)},d(e)})},disconnect:p};return new Promise(l)},n=function(e,n,t){return new Promise(function(o,r){t||(t={}),n||(n={});var c,i=new XMLHttpRequest;if(i.addEventListener("load",function(e){var n=JSON.parse(i.responseText);o(n)}),i.addEventListener("error",function(e){r(i)}),i.open(t.method||"POST",e+(t.path||"/")),t.files){for(var a in c=new FormData,n)c.append(a,n[a]);for(var s of t.files)c.append("file",s,s.name);t.progress&&i.upload.addEventListener("progress",function(e){e.percent=(e.loaded/e.total*100).toFixed(2),t.progress(e)})}else i.setRequestHeader("Content-Type","application/json; charset=utf-8");i.send(c||JSON.stringify(n))})};window.waveorb=function(t,o){if(0===t.indexOf("ws"))return e(t,o||{});{function r(e,o){return n(t,e,o)}return{fetch:r,upload:function(e,n){return n||(n={}),new Promise(function(t){var o=document.createElement("input");o.type="file",o.value=null,n.multiple&&(o.multiple=!0),n.accept&&(o.accept=n.accept),o.onchange=async function(){t(await r(e,{files:o.files}))},o.click()})}}}}}();